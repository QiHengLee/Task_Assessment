<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Task Assessment</title>
  <meta name="description" content="Task Assessment">
  <meta name="author" content="SitePoint">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="main.css">
</head>

<body>
  
  <div id="top"></div>
  <div id="bottom"></div>
  <div id="content">
    <div id="box">
      <img id="avatar" src="pictures/avatar.png" alt="">
    </div>
    <div id="username">j</div>
    <div id="inner_content">
      <div id="tagged">
        <div class="title">Tagged</div>
        <div id="tagVal" class="value"></div>
      </div>
      <div id="captured">
        <div class="title">Captured</div>
        <div id="capVal" class="value"></div>
      </div>
      <div id="vertical"></div>
      <div id="ranking">
        <div class="title">Ranking</div>
        <div class="value">
          <span id="rankVal" ></span>
          <span id="totalVal" style="font-size: 14px; font-family: 'Nunito', sans-serif; font-weight: 400; color: #898989;"></span>
        </div>
      </div>
      <br>
      <div id="mention">
        <hr id="left">
        <span id="mention_name">Recent Mentions</span>
        <hr id="right">
      </div>
      <a href="">
        <div id="container">
          <span id="writer"></span>
          <span id="elapsed"></span>
          <br>
          <div id="post_container">
            <span id="tag"></span><span id="post_content"></span>
          </div>  
        </div>
      </a>
    </div>
    <br>
    
  </div>
  <script type="text/javascript">
      // TODO: Fetch contact.json data from the server and display it in the contactTable
      // var data;
      var xhr=new XMLHttpRequest();
      xhr.onreadystatechange=function(){
            if (this.status==200 && this.readyState==4) {
                var data=JSON.parse(xhr.responseText);
                console.log(data);
                document.getElementById("username").innerHTML=data[0]["username"];
                document.getElementById("tagVal").innerHTML=data[0]["tag"];
                document.getElementById("capVal").innerHTML=data[0]["captured"];
            }
      };
      xhr.open("GET","getUser", false);
      xhr.send();

      xhr.onreadystatechange=function(){
            if (this.status==200 && this.readyState==4) {
                var data=JSON.parse(xhr.responseText);
                console.log(data);
                document.getElementById("rankVal").innerHTML=data[0]["rank"];
            }
      };
      xhr.open("GET","getRank", false);
      xhr.send();

      xhr.onreadystatechange=function(){
            if (this.status==200 && this.readyState==4) {
                var data=JSON.parse(xhr.responseText);
                console.log(data);
                document.getElementById("totalVal").innerHTML="/ " + data[0]["COUNT(*)"];
            }
      };
      xhr.open("GET","getTotal", false);
      xhr.send();

      xhr.onreadystatechange=function(){
            if (this.status==200 && this.readyState==4) {
                var data=JSON.parse(xhr.responseText);
                console.log(data);
                document.getElementById("writer").innerHTML=data[0]["writer"];
                document.getElementById("tag").innerHTML= "@" + data[0]["tagged"];
                document.getElementById("elapsed").innerHTML=data[0]["elapsed"] + "m";
                document.getElementById("post_content").innerHTML= " " + data[0]["content"];
            }
      };
      xhr.open("GET","mention", false);
      xhr.send();
  </script>
</body>
</html>
